# NPS for Windows

## 项目介绍

NPS for Windows是一个基于Qt开发的内网穿透客户端工具，为NPS（一款轻量级高性能的内网穿透代理服务器）提供了友好的图形用户界面。该工具允许用户方便地配置、启动和管理NPS客户端(npc)进程，实现内网服务的外网访问。

## 功能特性

- 直观的图形用户界面，简化内网穿透配置
- 支持配置服务器IP、端口、验证密钥(vkey)和连接协议(TCP/UDP)
- 一键启动和停止内网穿透服务
- 自动保存和加载配置信息
- 实时日志显示，方便监控连接状态和调试问题
- 优雅的UI设计，支持自定义样式

## 系统要求

- Windows操作系统
- 需要nps客户端程序(npc.exe)与主程序放置在同一目录
- 已安装Qt运行时库（如使用发布版本可能已包含必要依赖）

## 安装说明

1. 确保已安装Qt运行环境（如使用预编译版本则可跳过）
2. 将`npc.exe`放置在与主程序相同的目录下
3. 运行主程序`NPSforWindows.exe`

## 使用方法

1. **配置连接参数**：
   - 在界面中输入NPS服务器的IP地址
   - 输入服务器端口号
   - 输入验证密钥(vkey)
   - 选择连接协议(TCP或UDP)
2. **启动连接**：
   - 点击"连接服务器"按钮启动内网穿透服务
   - 连接成功后，按钮会变为"断开连接"
   - 日志区域会显示连接状态和详细信息
3. **保存配置**：
   - 点击"保存配置"按钮将当前设置保存到配置文件
   - 下次启动程序时会自动加载已保存的配置

## 项目结构

```
NPSforWindows/
├── NPSforWindows.pro      # Qt项目文件
├── main.cpp               # 程序入口
├── mainwindow.cpp         # 主窗口实现
├── mainwindow.h           # 主窗口头文件
├── mainwindow.ui          # UI界面设计
├── resources.qrc          # 资源文件
├── npc.exe                # NPS客户端程序
└── styles/                # 样式相关文件
    ├── styles.css         # CSS样式表
    ├── OPPOSans4.0.ttf    # 自定义字体
    └── logo.svg           # 程序图标
```

## 主要类与方法

- MainWindow

  ：主窗口类，负责UI交互和npc进程管理

  - `startNpcProcess()`：启动npc进程并建立连接
  - `stopNpcProcess()`：停止正在运行的npc进程
  - `saveSettings()`/`loadSettings()`：保存和加载配置
  - `logMessage()`：显示日志信息

## 配置文件

程序会在运行目录下创建`config.ini`文件，用于存储用户配置。配置包括：

- 服务器IP地址
- 服务器端口
- 验证密钥(vkey)
- 连接协议类型

## 常见问题

1. **进程启动失败**：确保`npc.exe`存在于程序目录中且具有执行权限
2. **连接失败**：检查服务器IP、端口和验证密钥是否正确，确保服务器处于运行状态
3. **配置不保存**：确保程序具有写入权限，检查磁盘空间是否充足

## 开发环境

- Qt 5.14.2或更高版本
- MinGW 64-bit编译器
- Windows操作系统

## 许可证

[在此添加许可证信息]

## 致谢

本项目使用了以下开源技术：

- [Qt](https://www.qt.io/) - 跨平台C++应用程序框架
- [NPS](https://github.com/ehang-io/nps) - 高性能内网穿透代理服务器